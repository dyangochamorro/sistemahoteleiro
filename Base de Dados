create database sistema_hoteleiro;

use sistema_hoteleiro;

create table tipos_usuario(codigo_tipo varchar(3) primary key not null, descricao_tipo varchar(10) not null);

create table usuarios_sis_hotel(codigo_usuario int primary key not null, descricao_usuario varchar(20) not null, 
senha_usuario varchar(10) not null, codigo_tipo varchar(3) not null, 
foreign key (codigo_tipo) references tipos_usuario(codigo_tipo));

create table sis_tab_enderecos(endereco_codigo int primary key not null, rua varchar(20), 
numero int, complemento varchar(10), bairro varchar (20), 
cidade varchar(20), estado varchar(20), pais varchar(20));

create table funcionarios(cpf varchar(14) primary key not null, func_matricula varchar(14) not null, salario float, 
rg varchar(14), endereco_codigo int not null, foreign key (endereco_codigo) references sis_tab_enderecos(endereco_codigo),
codigo_usuario int not null, foreign key (codigo_usuario) references usuarios_sis_hotel(codigo_usuario));

create table debitos(codido_debt int primary key not null, tipo_debt char not null, valor_debt float not null, 
situacao_debt char not null, detalhes_debt varchar (50), data_ger_debt datetime not null);

-- create table historico_debt_hospede();

create table suites_sis_hotel(codigo_suite int primary key not null, numero int not null, 
valor float not null, qtd_camas int not null, ocupado_situacao boolean not null,
detalhes_suite varchar(50), tipo_suite char not null);

create table hospede_sis(cpf varchar(14) not null primary key, rg varchar(14), nome varchar(30) not null, 
endereco_codigo int not null, num_catao_credito varchar(20) not null, forma_pagamento char not null,
codigo_suite int not null, foreign key (codigo_suite) references suites_sis_hotel(codigo_suite),
foreign key (endereco_codigo) references sis_tab_enderecos(endereco_codigo));

create table fatura(codigo_fatura int primary key not null, codigo_debt_fatura int not null, 
codigo_hospede_fatura varchar(14) not null, codigo_suite_fatura int not null, 
foreign key (codigo_debt_fatura) references debitos(codido_debt), 
foreign key (codigo_hospede_fatura) references hospede_sis(cpf), 
foreign key (codigo_suite_fatura) references suites_sis_hotel(codigo_suite));

create table tipo_evento_sis_hotel(codigo_tipo_evento varchar(10) not null primary key, 
descricao_tipo_evento varchar(25) not null);

create table eventos(codigo_evento int not null primary key, nome_evento_sis_hotel varchar(25) not null, 
data_inicio_evento datetime not null, data_fim_evento datetime not null, max_inscritos int not null, 
codigo_tipo_evento varchar(10) not null, evento_taxa int not null,
foreign key (codigo_tipo_evento) references tipo_evento_sis_hotel(codigo_tipo_evento), 
foreign key (evento_taxa) references debitos(codido_debt));

create table inscritos(codigo_inscrito int not null primary key, nome_inscrito varchar(30) not null, 
situação_inscrito char not null, codigo_debt_inscrito int not null, codigo_evento int not null, 
foreign key (codigo_debt_inscrito) references debitos(codido_debt), 
foreign key (codigo_evento) references eventos(codigo_evento));
